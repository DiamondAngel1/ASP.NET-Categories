@model List<CategoryItemModel>

@{
	Layout = "MainLayout";
	ViewData["Title"] = "Main";
}
<h1>Магазин АТБ</h1>
<div class="container">
	<h2>Категорії</h2>
	<a asp-action="Create" class="btn btn-success">Перейти на сторінку додавання категорії</a>
	<form asp-controller="Main" asp-action="AddCategory" method="post">
		<div class="form-group">
			<label for="Name">Назва категорії</label>
			<input type="text" name="Name" class="form-control" required />
		</div>
		<div class="form-group">
			<label for="Image">URL зображення</label>
			<input type="text" name="Image" class="form-control" required />
		</div>
		<button type="submit" class="btn btn-primary">Додати категорію</button>
	</form>

	<table class="table">
		<thead>
			<tr>
				<th scope="col">#</th>
				<th scope="col">Фото</th>
				<th scope="col">Назва</th>
				<th scope="col">Дії</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var category in Model)
			{
				<tr>
					<th scope="row">@category.Id</th>
					<td>
						<img src="@category.Image" width="100" />
					</td>
					<td>@category.Name</td>
					<td>
						<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal-@category.Id">
							Видалити
						</button>
						<a asp-action="Edit" asp-route-id="@category.Id" class="btn btn-warning">
							Редагувати
						</a>

						<div class="modal fade" id="confirmDeleteModal-@category.Id" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title">Підтвердження видалення</h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
									</div>
									<div class="modal-body">
										Ви впевнені, що хочете видалити категорію "@category.Name"?
									</div>
									<div class="modal-footer">
										<form asp-controller="Main" asp-action="DeleteCategory" method="post">
											<input type="hidden" name="id" value="@category.Id" />
											<button type="submit" class="btn btn-danger">Видалити</button>
										</form>
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Скасувати</button>
									</div>
								</div>
							</div>
						</div>
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>
